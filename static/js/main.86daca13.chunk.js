(this["webpackJsonpfaculty-scraper"]=this["webpackJsonpfaculty-scraper"]||[]).push([[0],{30:function(t,e,a){},31:function(t,e,a){},32:function(t,e,a){},38:function(t,e,a){"use strict";a.r(e);var s=a(2),n=a(0),r=a.n(n),i=a(20),l=a.n(i),c=(a(30),a(10)),u=a(11),o=a(7),h=a(15),d=a(14),p=(a(31),a(23)),m=a(21),j=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).state={url:"",loading:!1},s.handleChange=s.handleChange.bind(Object(o.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(o.a)(s)),s.sendRequest=s.sendRequest.bind(Object(o.a)(s)),s}return Object(u.a)(a,[{key:"handleChange",value:function(t){this.setState({url:t.target.value});var e=String(t.target.value).replace(/\/$/,"");this.validateUrl(e)?document.getElementById("input").setCustomValidity("Invalid URL: Make sure you are providing a valid university URL (starts with http(s):// and ends with .edu)."):document.getElementById("input").setCustomValidity("")}},{key:"handleSubmit",value:function(t){if(t.preventDefault(),!this.state.loading){var e=this.reformatUrl(String(this.state.url).replace(/\/$/,""));this.validateUrl(e)?console.log("Invalid URL."):(this.setState({loading:!0}),this.sendRequest(e))}}},{key:"validateUrl",value:function(t){return!t.endsWith(".edu")||!/^[a-zA-Z:\/\.]+$/.test(t)}},{key:"reformatUrl",value:function(t){var e=t;if(t.startsWith("https://")||t.startsWith("http://")||(e="https://".concat(e)),!e.startsWith("http://www.")&&!e.startsWith("https://www.")){var a=e.indexOf("//")+2;e=[e.slice(0,a),"www.",e.slice(a)].join("")}return console.log("Formatted url: ",e),e}},{key:"sendRequest",value:function(t){var e=this,a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})};console.log("Sending request to ",t),fetch("https://facultyscraper-heroku.herokuapp.com/",a).then((function(t){if(t.ok)return t.json();throw new Error("Bad response!")})).then((function(a){a.result?(e.setState({loading:!1,url:""}),0==a.urls.length?document.getElementById("input").setCustomValidity("Failed to get results! Check URL and make sure it is correct. Maybe try with/without the www."):e.props.history.push({pathname:"/results",data:a.urls})):setTimeout(e.sendRequest,1e4,t)})).catch((function(t){e.setState({loading:!1}),document.getElementById("input").setCustomValidity("Invalid URL! Try another variation of this URL and make sure it is accessible!")}))}},{key:"render",value:function(){return"Faculty Scraper"!=document.title&&(document.title="Faculty Scraper"),[Object(s.jsx)("h1",{className:"title",children:"Faculty Scraper"}),Object(s.jsx)("form",{onSubmit:this.handleSubmit,className:"wrap",autoComplete:"on",children:Object(s.jsxs)("label",{className:"scrape",children:[Object(s.jsx)("input",{autoFocus:!0,type:"text",id:"input",value:this.state.url,onChange:this.handleChange,placeholder:"Input a university URL (e.g. https://www.illinois.edu)",className:"scrapeBar"}),Object(s.jsx)("button",{type:"submit",className:"scrapeButton",children:this.state.loading?Object(s.jsx)(m.a,{}):Object(s.jsx)(p.a,{})})]})})]}}]),a}(r.a.Component),b=(a(32),function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props.location.data;return"Results"!=document.title&&(document.title="Results"),null==t?Object(s.jsx)("h1",{className:"error",children:"Error, no results present!"}):[Object(s.jsx)("h1",{className:"listTitle",children:"Faculty Scraper"}),Object(s.jsx)("hr",{className:"listBar"}),Object(s.jsx)("div",{className:"list",children:t.map((function(t){return Object(s.jsx)("li",{className:"listItem",children:Object(s.jsx)("a",{href:t,target:"_blank",className:"url",children:t})})}))})]}}]),a}(r.a.Component)),y=a(24),f=a(3);l.a.render(Object(s.jsx)(y.a,{basename:"/faculty-scraper",children:Object(s.jsxs)("div",{children:[Object(s.jsx)(f.a,{exact:!0,path:"/",component:j}),Object(s.jsx)(f.a,{path:"/results",component:b})]})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.86daca13.chunk.js.map